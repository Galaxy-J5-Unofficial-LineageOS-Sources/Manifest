From 3d0b56cd758dcd68a33a94437077c2945bb196fd Mon Sep 17 00:00:00 2001
From: Ihor Ivanov <toulmee@gmail.com>
Date: Sun, 26 Sep 2021 20:12:54 +0300
Subject: [PATCH 01/28] camera2: Add methods for backward compatibility

libmcf-jni.so library (which is proprietary blob required
for MotCamera2) looks for methods with these exact signatures,
but signatures of these methods was changed in Android 11.

This change returns these methods that makes MotCamera2
fully-functional on Android 11.

Change-Id: Ib9a701f6d8ebb783c52666e34e7539faba5cb99f
Signed-off-by: Ihor Ivanov <toulmee@gmail.com>
---
 .../hardware/camera2/impl/CameraMetadataNative.java  | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/core/java/android/hardware/camera2/impl/CameraMetadataNative.java b/core/java/android/hardware/camera2/impl/CameraMetadataNative.java
index 468e6041eb73..80d4d6dbafab 100644
--- a/core/java/android/hardware/camera2/impl/CameraMetadataNative.java
+++ b/core/java/android/hardware/camera2/impl/CameraMetadataNative.java
@@ -2081,6 +2081,18 @@ public class CameraMetadataNative implements Parcelable {
     private static native int nativeGetTypeFromTag(int tag, long vendorId)
             throws IllegalArgumentException;
 
+    private synchronized byte[] nativeReadValues(int tag) {
+        return nativeReadValues(tag, mMetadataPtr);
+    }
+
+    private synchronized int nativeGetTypeFromTagLocal(int tag) {
+        return nativeGetTypeFromTagLocal(mMetadataPtr, tag);
+    }
+
+    private synchronized int nativeGetTagFromKeyLocal(String keyname) {
+        return nativeGetTagFromKeyLocal(mMetadataPtr, keyname);
+    }
+
     /**
      * <p>Perform a 0-copy swap of the internal metadata with another object.</p>
      *
-- 
2.34.1

